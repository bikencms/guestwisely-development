jQuery(document).ready(function(){var e=jQuery("._read-more-outer"),t=jQuery("._read-more-inner"),r=jQuery("._read-more-more-button"),a=e.data("initialHeight");void 0===a&&(a=300),t.height()<=a+100?(e.css("height","auto"),r.css("display","none")):(e.css("height",a+"px"),r.css("display","block"),r.on("click",function(r){var l=t.height(),o=jQuery(this);if(e.data("collapsed")){e.animate({height:l},a),e.data("collapsed",!1),o.removeClass("collapsed");var i=o.find(".rotate");void 0===(s=o.data("rotateClass"))&&(s="rotate-180"),i.removeClass("rotate-0"),i.addClass(s)}else{e.animate({height:a+"px"},a),e.data("collapsed",!0),o.addClass("collapsed");var s;i=o.find(".rotate");void 0===(s=o.data("rotateClass"))&&(s="rotate-180"),i.removeClass(s),i.addClass("rotate-0")}}))});var _map=null,_infoWindow=null;function createMarker(e,t,r,a,l,o,i,s){var n=new google.maps.Marker({position:new google.maps.LatLng(t,r),map:e});return null!=a&&n.setTitle(a),null!=i&&n.setAnimation(i),void 0!==l&&null!=l&&(n.infowindow=new google.maps.InfoWindow({content:l}),google.maps.event.addListener(n,"click",function(){"undefined"!=typeof _infoWindowExternalContainerId&&null!=_infoWindowExternalContainerId?jQuery("#"+_infoWindowExternalContainerId).html(this.infowindow.getContent()):(_infoWindow&&_infoWindow.close(),_infoWindow=this.infowindow,this.infowindow.open(e,this))})),null!=o&&o.extend(n.position),null!=s&&n.setIcon(s),n}var _mapOptions=null,_marker=null,_mapLoaded=!1;function setupMap(){if(_mapOptions={center:new google.maps.LatLng(54.7990732,-3.9634416),zoom:5,streetViewControl:!0},"undefined"!=typeof _mapStyles&&null!=_mapStyles&&(_mapOptions.styles=_mapStyles),_map=new google.maps.Map(document.getElementById("_villas-365-map-canvas"),_mapOptions),jQuery(window).on("resize",function(){google.maps.event.trigger(_map,"resize")}),null!=_coordinates.latitude&&null!=_coordinates.longitude){var e=new google.maps.LatLng(_coordinates.latitude,_coordinates.longitude);_map.setCenter(e),_map.setZoom(16),makeMarker(e)}}function makeMarker(e){null!=_marker?_marker.setPosition(e):_marker=createMarker(_map,e.lat(),e.lng(),null,null,null,google.maps.Animation.DROP)}jQuery(document).ready(function(){_mapLoaded||1!=jQuery("#_villas-365-map-canvas").length||(setupMap(),_mapLoaded=!0)});var _floaterTopPadding=0,_floaterScrollPoint=0,_footerScrollTop=null;function _villas365PropertyImagesScrollerClickImage(e,t){e.preventDefault();var r=t.data("imageKey");jQuery(".banner-carousel").carousel(r)}function _villas365PropertyImagesScrollerShouldScroll(){var e=0;return jQuery("ul#_property-images-scrolling-features>li").each(function(){e+=jQuery(this).width()+10}),e>jQuery("#_property-images-scrolling-container").first().width()}function _villas365PropertyImagesScrollerScrollRight(){var e=jQuery("ul#_property-images-scrolling-features"),t=jQuery("ul#_property-images-scrolling-features>li").first();t.remove(),e.append(t),e.css("left",0),t.off("click").on("click",function(e){_villas365PropertyImagesScrollerClickImage(e,jQuery(this).find(".property-images-link"))})}function _villas365PropertyImagesScrollerScrollLeft(){var e=jQuery("ul#_property-images-scrolling-features"),t=jQuery("ul#_property-images-scrolling-features>li").last();t.remove(),e.prepend(t),t.off("click").on("click",function(e){_villas365PropertyImagesScrollerClickImage(e,jQuery(this).find(".property-images-link"))})}function _villas365PropertyAmenitySwitch(e){var t=e.data("amenityName");if(!((r=jQuery("._villas-365-property-amenities-container ._villas-365-property-amenity-group.active")).data("amenityName")==t)&&void 0!==t&&null!=t&&""!=t){var r,a=jQuery("._villas-365-property-amenities-container ._villas-365-property-amenity-group[data-amenity-name='"+t+"']");(r=jQuery("._villas-365-property-amenities-container ._villas-365-property-amenity-group.active")).removeClass("active"),a.addClass("active"),r.fadeOut(),a.fadeIn(),jQuery("._villas-365-property-amenity-switcher ._villas-365-property-amenity-switcher-item-selected ._villas-365-property-amenity-switcher-item-selected-text").text(t)}}function _villas365PropertyInformationItemsSetHeight(){jQuery("._villas-365-property-information ._villas-365-property-information-items ._villas-365-property-information-item").each(function(){var e=jQuery(this),t=e.find("._villas-365-property-information-item-content").height();e.css("height",t+60+"px")})}function _villas365PropertyInformationItemClicked(e){var t=jQuery("#"+e.data("informationItemId")),r=jQuery("._villas-365-property-information ._villas-365-property-information-controls ._villas-365-property-information-control.active"),a=jQuery("._villas-365-property-information ._villas-365-property-information-items ._villas-365-property-information-item.active");r.removeClass("active"),e.addClass("active"),a.removeClass("active"),t.addClass("active")}function calculateFloaterOffsets(){var e=jQuery("#_villas-365-property-floater-anchor"),t=jQuery("#main-header"),r=0;t.length>0&&(r=t.height());var a=jQuery("#wpadminbar"),l=0;a.length>0&&(l=a.height()),_floaterTopPadding=r+l+60,_floaterScrollPoint=e.offset().top-_floaterTopPadding}function positionFloater(){var e=jQuery("#_villas-365-property-floater"),t=e.find("._villas-365-property-floater-content"),r=jQuery(document).scrollTop();jQuery(document).scrollTop()>_floaterScrollPoint?(e.offset().top+t.height()>jQuery("footer").offset().top-50||null!=_footerScrollTop)&&(null==_footerScrollTop||r>=_footerScrollTop)?(null==_footerScrollTop&&(_footerScrollTop=r),e.css("top",_floaterTopPadding-30-(r-_footerScrollTop)+"px")):(_footerScrollTop=null,e.addClass("float"),e.css("top",_floaterTopPadding-30+"px")):(e.removeClass("float"),e.css("top","-30px"))}function removeFloater(){var e=jQuery("#_villas-365-property-floater");e.removeClass("float"),e.css("top","-30px")}function calculatePrice(){var e=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-row"),t=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-button"),r=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-per-night"),a=r.data("defaultPerNight"),l=r.data("rateLabel"),o=r.data("rateLabelPlural"),i=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-label-per-night"),s=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-per-night"),n=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-fees"),p=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-tax"),c=jQuery("#_villas-365-property-floater #_villas-365-property-floater-total-label"),y=jQuery("#_villas-365-property-floater #_villas-365-property-floater-total"),d=jQuery("#_villas-365-property-floater").data("propertyId"),u=jQuery("#_villas-365-property-floater input[name='checkin']").val(),m=jQuery("#_villas-365-property-floater input[name='checkout']").val(),f=jQuery("#_villas-365-property-floater #_villas-365-adults").val(),v=jQuery("#_villas-365-property-floater #_villas-365-children").val(),_=jQuery("#_villas-365-property-floater #_villas-365-property-floater-minimum-nights-container"),h=jQuery("#_villas-365-property-floater #_villas-365-property-floater-minimum-nights"),g=jQuery("#_villas-365-property-floater #_villas-365-property-floater-minimum-nights-dates-text");""!==u&&""!==m&&""!==f?(y.removeClass("text-center"),y.html('<i class="fas fa-spinner fa-spin"></i>'),r.html('<i class="fas fa-spinner fa-spin"></i>'),i.html('<i class="fas fa-spinner fa-spin"></i>'),s.html('<i class="fas fa-spinner fa-spin"></i>'),n.html('<i class="fas fa-spinner fa-spin"></i>'),p.html('<i class="fas fa-spinner fa-spin"></i>'),jQuery.ajax({type:"POST",url:_villas_365_wp_ajax.ajax_url,dataType:"json",data:{_ajax_nonce:_villas_365_wp_ajax.nonce,action:"_villas_365_calculate_booking",propertyId:d,checkIn:u,checkOut:m,adults:f,children:v}}).done(function(d){"success"===d.data.status?(c.removeClass("d-none"),y.html(d.data.total),r.html(d.data.perNight+"/"+l),e.removeClass("d-none"),i.html(d.data.perNight+" x "+d.data.totalNights+" "+(d.data.totalNights>1?o:l)),s.html(d.data.rentTotal),n.html(d.data.serviceTotal),p.html(d.data.taxTotal),"false"===d.data.numberOfNightsOk?(_.show(),h.text(d.data.minimumNights),g.show()):_.hide()):"error"===d.data.status&&""!==d.data.message?(c.addClass("d-none"),y.addClass("text-center"),y.html(d.data.message),r.html(a),showPriceDetails(t,!0),e.addClass("d-none"),i.html("?"),s.html("?"),n.html("?"),p.html("?"),_.show(),h.text(h.data("defaultMinimumNights")),g.hide()):(c.addClass("d-none"),y.addClass("text-center"),y.html("We're sorry, an error occurred."),r.html(a),showPriceDetails(t,!0),e.addClass("d-none"),i.html("?"),s.html("?"),n.html("?"),p.html("?"),_.show(),h.text(h.data("defaultMinimumNights")),g.hide())}).fail(function(l){c.addClass("d-none"),y.addClass("text-center"),y.html("We're sorry, an error occurred."),r.html(a),showPriceDetails(t,!0),e.addClass("d-none"),i.html("?"),s.html("?"),n.html("?"),p.html("?"),_.show(),h.text(h.data("defaultMinimumNights")),g.hide()})):(c.addClass("d-none"),y.html(""),r.html(a),showPriceDetails(t,!0),e.addClass("d-none"),i.html("?"),s.html("?"),n.html("?"),p.html("?"))}function goToBookingPage(e){var t=e.attr("href"),r=jQuery("#_villas-365-property-floater").data("propertyId"),a=jQuery("#_villas-365-property-floater input[name='checkin']").val(),l=jQuery("#_villas-365-property-floater input[name='checkout']").val(),o=jQuery("#_villas-365-property-floater #_villas-365-adults").val(),i=jQuery("#_villas-365-property-floater #_villas-365-children").val();t=t+"?property="+r,""!==a&&(t+="&checkin="+a),""!==l&&(t+="&checkout="+l),""!==o&&(t+="&adults="+o),""!==i&&(t+="&children="+i),document.location.href=t}function showPriceDetails(e,t){void 0===t&&(t=!1);var r=jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-row ._villas-365-property-floater-price-details-container");if(r.data("collapsed")&&!t){r.slideDown(),r.data("collapsed",!1),e.removeClass("collapsed");var a=e.find(".rotate");void 0===(l=e.data("rotateClass"))&&(l="rotate-180"),a.removeClass("rotate-0"),a.addClass(l)}else if(!r.data("collapsed")||t){r.slideUp(),r.data("collapsed",!0),e.addClass("collapsed");var l;a=e.find(".rotate");void 0===(l=e.data("rotateClass"))&&(l="rotate-180"),a.removeClass(l),a.addClass("rotate-0")}}jQuery(document).ready(function(){jQuery("#_property-images-scrolling-features-scroll-left").on("click",function(e){e.preventDefault(),_villas365PropertyImagesScrollerShouldScroll()&&_villas365PropertyImagesScrollerScrollLeft()}),jQuery("#_property-images-scrolling-features-scroll-right").on("click",function(e){e.preventDefault(),_villas365PropertyImagesScrollerShouldScroll()&&_villas365PropertyImagesScrollerScrollRight()}),jQuery("._villas-365-property-amenity-switcher ._villas-365-property-amenity-switcher-items ._villas-365-property-amenity-switcher-item").on("click",function(){_villas365PropertyAmenitySwitch(jQuery(this)),jQuery("._villas-365-property-amenity-switcher ._villas-365-property-amenity-switcher-items").fadeOut()}),jQuery("._villas-365-property-amenity-switcher ._villas-365-property-amenity-switcher-item-selected").on("click",function(){jQuery("._villas-365-property-amenity-switcher ._villas-365-property-amenity-switcher-items").fadeToggle()}),jQuery("._villas-365-property-amenity-switcher-inline ._villas-365-property-amenity-switcher-inline-items ._villas-365-property-amenity-switcher-inline-item").on("click",function(){var e=jQuery(this);_villas365PropertyAmenitySwitch(e),jQuery("._villas-365-property-amenity-switcher-inline ._villas-365-property-amenity-switcher-inline-items ._villas-365-property-amenity-switcher-inline-item.active").removeClass("active"),e.addClass("active")}),jQuery("#_property-images-scrolling-features .property-images-link").on("click",function(e){_villas365PropertyImagesScrollerClickImage(e,jQuery(this))}),jQuery(".banner-carousel").one("slide.bs.carousel",function(){jQuery("._villas-365-property-header").fadeOut()}),jQuery("#_villas-365-property-header-close-button").one("click",function(){jQuery("._villas-365-property-header").fadeOut()}),jQuery("._villas-365-property-information ._villas-365-property-information-controls ._villas-365-property-information-control").on("click",function(){_villas365PropertyInformationItemClicked(jQuery(this))}),calculateFloaterOffsets(),positionFloater(),jQuery(window).on("scroll",function(){jQuery(window).width()>=992&&jQuery(window).height()>=700&&positionFloater()}),jQuery(window).on("resize",function(){jQuery(window).width()>=992&&jQuery(window).height()>=700?(calculateFloaterOffsets(),positionFloater()):jQuery(window).height()<700&&removeFloater()}),jQuery("#_villas-365-property-floater #_villas-365-adults, #_villas-365-property-floater #_villas-365-children").on("change",function(){calculatePrice()}),jQuery("#_villas-365-property-floater ._villas-365-date-control").on("changeDate",function(){calculatePrice()}),jQuery("#_villas-365-property-floater #_villas-365-property-floater-book-now-button").on("click",function(e){e.preventDefault(),goToBookingPage(jQuery(this))}),jQuery("#_villas-365-property-floater #_villas-365-property-floater-price-details-button").on("click",function(e){showPriceDetails(jQuery(this))})});
